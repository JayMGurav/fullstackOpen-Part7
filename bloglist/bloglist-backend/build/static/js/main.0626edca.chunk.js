(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{61:function(e,t,n){e.exports=n(92)},70:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),l=n.n(c),u=n(8),o=(n(70),n(97)),s=n(13),i=n(1),d=n.n(i),m=n(6),p=n(12),v=n.n(p),f="http://localhost:3001/api/blogs",b=null,g=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(f,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b}},e.next=3,v.a.post(f,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,v.a.post("".concat(f,"/").concat(t,"/comments"),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j={getAll:g,getBlog:E,create:h,update:function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,v.a.put("".concat(f,"/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){b="bearer ".concat(e)},remove:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b}},e.next=3,v.a.delete("".concat(f,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),comment:O},w={login:function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("http://localhost:3001/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e,t,n){return function(){var a=Object(m.a)(d.a.mark((function a(r){var c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(c=null)&&clearTimeout(c),c=setTimeout((function(){r({type:"RESET_NOTIFICATION"})}),1e3*n),r({type:"SET_NOTIFICATION",data:{message:e,type:t}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"RESET_NOTIFICATION":return{};default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(s.a)({},t.data,{loggedIn:!0});case"IS_LOGGED_IN":var n=JSON.parse(window.localStorage.getItem("loggedBloglistappUser"));return n&&j.setToken(n.token),n?Object(s.a)({},n,{loggedIn:!0}):{loggedIn:!1};case"LOGOUT_USER":return window.localStorage.removeItem("loggedBloglistappUser"),{loggedIn:!1};default:return e}},I=n(7),N=n(96),T=n(16),B={getAllUsers:function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://localhost:3001/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:3001/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return Object(T.a)(t.data);default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return Object(T.a)(t.data);case"NEW_BLOG":return[].concat(Object(T.a)(e),[Object(s.a)({},t.data)]);case"COMMENT_BLOG":return[].concat(Object(T.a)(e.filter((function(e){return e.id!==t.data.id}))),[Object(s.a)({},t.data)]);case"LIKE_BLOG":return[].concat(Object(T.a)(e.filter((function(e){return e.id!==t.data.id}))),[Object(s.a)({},t.data)]).sort((function(e,t){return t.likes-e.likes}));case"REMOVE_BLOG":return Object(T.a)(e.filter((function(e){return e.id!==t.data.id})));default:return e}},L=n(94),U=n(32),A=function(e,t){var n=Object(a.useState)(""),r=Object(U.a)(n,2),c=r[0],l=r[1];return{type:e,value:c,onChange:function(e){l(e.target.value)},id:t,name:t,reset:function(){l("")}}},G={removeBlog:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){var r,c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.remove(e);case 3:a({type:"REMOVE_BLOG",data:{id:e}}),a(y('Removed "'.concat(t,'" from the list'),"success",5)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),l=(null===n.t0||void 0===n.t0||null===(r=n.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.error)||n.t0.message,a(y(l,"error",5));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},likeBlog:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){var r,c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.update(e,t);case 3:a({type:"LIKE_BLOG",data:Object(s.a)({},t)}),a(y('Liked "'.concat(t.title,'"'),"success",5)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),l=(null===n.t0||void 0===n.t0||null===(r=n.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.error)||n.t0.message,a(y(l,"error",5));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},commentBlog:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){var r,c,l,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.comment(e,t);case 3:r=n.sent,console.log(r),a({type:"COMMENT_BLOG",data:Object(s.a)({},r,{comments:Object(T.a)(r.comments)})}),a(y('You commented "'.concat(t.comment,'"'),"success",5)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),u=(null===n.t0||void 0===n.t0||null===(c=n.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.error)||n.t0.message,a(y(u,"error",5));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},R=Object(u.b)(null,G)((function(e){var t,n=A("text","comment"),a=e.blog;return r.a.createElement("div",{className:"blog"},r.a.createElement("h2",null,null===a||void 0===a?void 0:a.title," -",null===a||void 0===a?void 0:a.author),r.a.createElement("div",{className:"blogDetails"},r.a.createElement("p",null,null===a||void 0===a?void 0:a.url),r.a.createElement("p",null,"Likes : ",null===a||void 0===a?void 0:a.likes," ",r.a.createElement(L.a,{className:"like_btn",onClick:function(){return e.likeBlog(null===a||void 0===a?void 0:a.id,Object(s.a)({},a,{likes:(null===a||void 0===a?void 0:a.likes)+1}))}},"like")),(null===a||void 0===a?void 0:a.user)?r.a.createElement("p",null,"added by : ",null===a||void 0===a?void 0:a.user.name):null,r.a.createElement(L.a,{variant:"danger",onClick:function(){return e.removeBlog(null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.title)}},"remove")),r.a.createElement("div",{style:{marginTop:20}},"comment :",r.a.createElement("input",Object.assign({},n,{reset:""})),r.a.createElement("button",{onClick:function(){return function(t,n){e.commentBlog(t,n)}(null===a||void 0===a?void 0:a.id,{comment:n.value})}},"comment")),(null===a||void 0===a||null===(t=a.comments)||void 0===t?void 0:t.length)?r.a.createElement("ul",null,null===a||void 0===a?void 0:a.comments.map((function(e){return r.a.createElement("li",{key:e},e)}))):null)})),C=n(10),F=n(100),z=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(U.a)(n,2),l=c[0],u=c[1],o={display:l?"none":""},s={display:l?"":"none"},i=function(){u(!l)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:i}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(L.a,{onClick:i},e.buttonLabel)),r.a.createElement("div",{style:s,className:"togglableContent"},e.children,r.a.createElement(L.a,{onClick:i},"cancel")))}));z.displayName="Togglable";var D=z,M={createBlog:function(e,t,n){return function(){var a=Object(m.a)(d.a.mark((function a(r){var c,l,u,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.create({title:e,author:t,url:n});case 3:c=a.sent,r({type:"NEW_BLOG",data:Object(s.a)({},c)}),r(y('Added "'.concat(c.title,'" to the list'),"success",5)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),o=(null===a.t0||void 0===a.t0||null===(l=a.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.error)||a.t0.message,r(y(o,"error",5));case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}},J=Object(u.b)(null,M)((function(e){var t=e.blogFormRef,n=e.createBlog,a=A("text","title"),c=A("text","author"),l=A("text","url");return r.a.createElement(D,{buttonLabel:"add new blog",ref:t},r.a.createElement("h2",null,"Add new blog to the list"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.reset(),c.reset(),l.reset(),n(a.value,c.value,l.value)},className:"formDiv"},r.a.createElement("div",null,"Title :",r.a.createElement("input",Object.assign({},a,{reset:""}))),r.a.createElement("div",null,"Author :",r.a.createElement("input",Object.assign({},c,{reset:""}))),r.a.createElement("div",null,"Url :",r.a.createElement("input",Object.assign({},l,{reset:""}))),r.a.createElement("button",{type:"submit",id:"add_to_bloglist"},"Add")))})),V=function(e){var t=Object(a.useRef)();return r.a.createElement(F.a,null,r.a.createElement(J,{blogFormRef:t}),r.a.createElement("br",null),e.blogs.map((function(e){var t=e.id,n=e.title;return r.a.createElement(C.b,{to:"/blogs/".concat(t),key:t},r.a.createElement(F.a.Item,null,n))})))},W=n(98),H=n(99),K={logoutUser:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"LOGOUT_USER"})}catch(c){r=(null===c||void 0===c||null===(n=c.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||c.message,t(y(r,"error",5))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Y=Object(u.b)((function(e){return{user:e.user}}),K)((function(e){return r.a.createElement(W.a,{variant:"light",bg:"light"},r.a.createElement(W.a.Brand,{href:"/"},"Blog list"),r.a.createElement(W.a.Toggle,null),r.a.createElement(H.a,{className:"mr-auto"},r.a.createElement(C.b,{className:"mr-2",to:"/"},"Home"),r.a.createElement(C.b,{className:"mr-2",to:"/blogs"},"blogs"),r.a.createElement(C.b,{className:"mr-2",to:"/users"},"users")),r.a.createElement(W.a.Collapse,{className:"justify-content-end"},r.a.createElement(W.a.Text,null,"Signed in as: ",r.a.createElement("strong",null,e.user.name,"(@",e.user.username,")"),r.a.createElement(L.a,{variant:"outline-dark",onClick:e.logoutUser},"Logout"))))})),q=function(e){var t,n,a;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name,"(@",null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.username,")"),r.a.createElement("br",null),r.a.createElement(F.a,{as:"ul"},r.a.createElement(F.a.Item,{as:"li",active:!0},"Added blogs"),null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.blogs.map((function(e){var t=e.title,n=e.id;return r.a.createElement(C.b,{to:"/blogs/".concat(n)},r.a.createElement(F.a.Item,{as:"li",key:"added"+n},t))}))))},P=n(95),Q=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement(P.a,{responsive:!0,bordered:!1},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"user name"),r.a.createElement("th",null,"blogs created"))),r.a.createElement("tbody",null,e.users.map((function(e){var t=e.length,n=e.id,a=e.name;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,r.a.createElement(C.b,{to:"/users/".concat(n)},a," ")),r.a.createElement("td",null,t))})))))},X={initializeUsers:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.getAllUsers();case 3:n=e.sent,t({type:"INIT_USERS",data:n}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c=(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||e.t0.message,t(y(c,"error",5));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},initializeBlogs:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Z=Object(u.b)((function(e){return{users:e.users,blogs:e.blogs}}),X)((function(e){Object(a.useEffect)((function(){e.initializeBlogs(),e.initializeUsers()}),[]);var t=function(t,n){return e[n].find((function(e){return e.id===t}))},n=Object(I.f)({path:"/blogs/:id"}),c=n?t(n.params.id,"blogs"):null,l=Object(I.f)({path:"/users/:id"}),u=l?t(l.params.id,"users"):null,s=e.blogs.map((function(e){return{id:e.id,title:e.title}})),i=e.users.map((function(e){return{id:e.id,name:e.name,length:e.blogs.length}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null),r.a.createElement(N.a,{fluid:!0},r.a.createElement(o.a,null,r.a.createElement("h1",null,"Blog App"))),r.a.createElement(o.a,null,r.a.createElement(I.c,null,r.a.createElement(I.a,{path:"/blogs/:id"},r.a.createElement(R,{blog:c})),r.a.createElement(I.a,{path:"/blogs"},r.a.createElement(V,{blogs:s})),r.a.createElement(I.a,{path:"/users/:id"},r.a.createElement(q,{user:u})),r.a.createElement(I.a,{path:"/users"},r.a.createElement(Q,{users:i})),r.a.createElement(I.a,{path:"/"},r.a.createElement(V,{blogs:s})))))})),$={loginUser:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){var r,c,l,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedBloglistappUser",JSON.stringify(r)),j.setToken(r.token),a({type:"LOGIN_USER",data:r}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),u=(null===n.t0||void 0===n.t0||null===(c=n.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.error)||n.t0.message,a(y(u,"error",5));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},ee=Object(u.b)(null,$)((function(e){var t=A("text","username"),n=A("password","password"),a=function(){var a=Object(m.a)(d.a.mark((function a(r){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.preventDefault(),console.log({username:t.value,password:n.value}),e.loginUser(t.value,n.value),t.reset(),n.reset();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Login to Bloglist"),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"username :",r.a.createElement("input",Object.assign({},t,{reset:""}))),r.a.createElement("div",null,"password :",r.a.createElement("input",Object.assign({},n,{reset:""}))),r.a.createElement("button",{type:"submit",id:"login-button"},"login")))})),te=Object(u.b)((function(e){return{notification:e.notification}}),null)((function(e){var t=e.notification;return t.message||t.type?r.a.createElement("div",{className:t.type},t.message):null})),ne={checkUserLoginStatus:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"IS_LOGGED_IN"})}catch(c){r=(null===c||void 0===c||null===(n=c.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||c.message,t(y(r,"error",5))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ae=Object(u.b)((function(e){return{loggedIn:e.user.loggedIn}}),ne)((function(e){return Object(a.useEffect)((function(){e.checkUserLoginStatus()}),[]),r.a.createElement(o.a,{fluid:!0},r.a.createElement(te,null),e.loggedIn?r.a.createElement(Z,null):r.a.createElement(ee,null))})),re=n(22),ce=n(59),le=n(60),ue=Object(re.combineReducers)({blogs:_,notification:k,user:x,users:S}),oe=Object(re.createStore)(ue,Object(le.composeWithDevTools)(Object(re.applyMiddleware)(ce.a)));l.a.render(r.a.createElement(u.a,{store:oe},r.a.createElement(C.a,null,r.a.createElement(ae,null))),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.0626edca.chunk.js.map